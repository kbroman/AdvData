\documentclass[aspectratio=169,12pt,t]{beamer}

\usepackage{graphicx}
\setbeameroption{hide notes}
\setbeamertemplate{note page}[plain]
\usepackage{listings}

\input{../LaTeX/header.tex}

\title{Data visualization}
\author{\href{https://kbroman.org}{Karl Broman}}
\institute{Biostatistics \& Medical Informatics, UW{\textendash}Madison}
\date{\href{https://kbroman.org}{\tt \scriptsize \color{foreground} kbroman.org}
\\[-4pt]
\href{https://github.com/kbroman}{\tt \scriptsize \color{foreground} github.com/kbroman}
\\[-4pt]
\href{https://twitter.com/kwbroman}{\tt \scriptsize \color{foreground} @kwbroman}
\\[-4pt]
{\scriptsize Course web: \href{https://kbroman.org/AdvData}{\tt kbroman.org/AdvData}}
}


\begin{document}


{
\setbeamertemplate{footline}{} % no page number here
\frame{
  \titlepage

\note{
}
} }


\begin{frame}{Displaying data well}

\bbi
\item Be accurate and clear.

\item Let the data speak.

\bi
\item Show as much information as possible, taking care not to
  obscure the message.
\ei

\item Science not sales.

\bi
\item Avoid unnecessary frills (esp. gratuitous 3d).
\ei

\item In tables, every digit should be meaningful. Don't drop ending 0's.
\ei

\note{
}
\end{frame}




\begin{frame}[c]{Show the data}

\begin{columns}
\column{0.5\textwidth}

\figw{Figs/fig1a.png}{1.0}


\column{0.5\textwidth}

\only<1|handout 0>{\figw{Figs/fig1c.png}{1.0}}
\only<2|handout 0>{\figw{Figs/fig1d.png}{1.0}}
\only<3>{\figw{Figs/fig1e.png}{1.0}}
\only<4|handout 0>{\figw{Figs/fig1f.png}{1.0}}
\only<5|handout 0>{\figw{Figs/fig1g.png}{1.0}}
\only<6|handout 0>{\figw{Figs/fig1h.png}{1.0}}


\end{columns}

\note{

}

\end{frame}




\begin{frame}[c]{Avoid pie charts}


\begin{columns}
\column{0.5\textwidth}

\figw{Figs/fig2a_rev.png}{1.0}


\column{0.5\textwidth}

\only<1|handout 0>{\figw{Figs/fig2c.png}{1.0}}
\only<2|handout 0>{\figw{Figs/fig2d.png}{1.0}}
\only<3>{\figw{Figs/fig2e.png}{1.0}}

\end{columns}

\note{

}
\end{frame}





\begin{frame}{Avoid pie charts}

\only<1|handout 0>{\figh{Figs/piecharts.pdf}{0.81}}
\only<2|handout 0>{\figh{Figs/piecharts_3d.pdf}{0.81}}
\only<3>{\figh{Figs/piecharts_3d_w_bars.pdf}{0.81}}
\only<4|handout 0>{\figh{Figs/piecharts_w_bars.pdf}{0.81}}

\bigskip

\hfill \lolit \footnotesize
via \href{https://twitter.com/MonaChalabi/status/527121946073632768/photo/1}{\tt @MonaChalabi}
(\href{https://bit.ly/pie_vs_barchart}{\tt bit.ly/pie\_vs\_barchart})

\note{
}
\end{frame}






\begin{frame}{Consider logs}

\begin{columns}
\column{0.5\textwidth}

\figw{Figs/fig3a.png}{1.0}


\column{0.5\textwidth}

\only<1>{\figw{Figs/fig3b.png}{1.0}}
\only<2|handout 0>{\figw{Figs/fig3c.png}{1.0}}
\only<3|handout 0>{\figw{Figs/fig3d.png}{1.0}}

\end{columns}

\note{

}
\end{frame}



\begin{frame}[c]{Consider logs}

\only<1|handout 0>{\figh{Figs/fig5c.png}{0.85}}
\only<2|handout 0>{\figh{Figs/fig5d.png}{0.85}}
\only<3>{\figh{Figs/fig5e.png}{0.85}}
\only<4|handout 0>{\figh{Figs/fig5f.png}{0.85}}
\only<5|handout 0>{\figh{Figs/fig5b.png}{0.85}}

\note{
}
\end{frame}





\begin{frame}[c]{Consider differences}

\figh{Figs/fig5a.png}{0.85}

\note{
}
\end{frame}



\begin{frame}[c]{Another ``{\hilit take logs}'' example}

\figh{MoreFigs/broman_fig1.jpg}{0.80}

\vfill \hfill \footnotesize \lolit
Broman et al., Am J Hum Genet 63:861-869, 1998, Fig. 1

\note{
  }
\end{frame}





\begin{frame}{Ease comparisons}

\hilit (things to be compared should be adjacent)

\bigskip

\figw{Figs/ease_comparisons_1.pdf}{1.0}

\note{
}
\end{frame}





\begin{frame}{Ease comparisons}

\hilit (add a bit of color)

\bigskip

\figw{Figs/ease_comparisons_2.pdf}{1.0}

\note{
}
\end{frame}




\begin{frame}[c]{Which comparison is easiest?}

\figw{Figs/which_comparison.pdf}{1.0}

\note{
}
\end{frame}


\begin{frame}{Don't distort the quantities}

{\hilit
  \only<1>{(value $\propto$ radius)}
  \only<2|handout 0>{(value $\propto$ area)}
}

\bigskip

\only<1>{\figh{Figs/circles_1.pdf}{0.75}}
\only<2|handout 0>{\figh{Figs/circles_2.pdf}{0.75}}

\note{
}
\end{frame}



\begin{frame}{Don't use areas at all}

{\hilit
  (value $\propto$ height)
}

\bigskip

\figh{Figs/circles_3.pdf}{0.75}

\note{
}
\end{frame}



\end{document}


\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
Encoding data
\end{minipage}

\vspace{30mm}

\smallersize \color{white}
\hspace{1in} \begin{minipage}[t]{4in}
\vspace*{0mm}

{\smallsize \color{pink} Quantities}
\vspace{5mm}

\begin{itemize}
\item Position
\item Length
\item Angle
\item Area
\item Luminance {\color{blue} (light/dark)}
\item Chroma {\color{blue} (amount of color)}
\end{itemize}

\end{minipage}
\hfill
\begin{minipage}[t]{4in}
\vspace*{0mm}

{\smallsize \color{pink} Categories}
\vspace{5mm}

\begin{itemize}
\item Shape
\item Hue {\color{blue} (which color)}
\item Texture
\item Width
\end{itemize}

\end{minipage}

\newpage


\headsize \color{yellow}
\hfill
\begin{minipage}{6.25in}
\centering
Ease comparisons

\bigskip

\color{blue} \smallersize
(align things vertically)
\end{minipage}

\vfill

<<histograms>>=
par(mfrow=c(2,2), bg=bgcolor, fg="white", col="white",
    col.axis="white", col.lab="white")
set.seed(85588489)
fem <- rnorm(600, 64, 2.8)
mal <- rnorm(600, 68, 2.8)
jt <- c(fem, mal)
br <- seq(min(jt), max(jt), len=51)
hist(fem, breaks=br, yaxt="n", ylab="", main="Women",
     xlab="Height (in)", col.main=pink)
hist(mal, breaks=br, yaxt="n", ylab="", main="Men",
     xlab="Height (in)", col.main=blue)
hist(mal, breaks=br, yaxt="n", ylab="", main="Men",
     xlab="Height (in)", col.main=blue)
@


\newpage


\headsize \color{yellow}
\hfill
\begin{minipage}{6.25in}
\centering
Ease comparisons

\bigskip

\color{blue} \smallersize
(use common axes)
\end{minipage}

\vfill

<<histograms2>>=
par(mfcol=c(2,2), bg=bgcolor, fg="white", col="white",
    col.axis="white", col.lab="white")
hist(fem, breaks=51, yaxt="n", ylab="", main="Women",
     xlab="Height (in)", col.main=pink)
hist(mal, breaks=51, yaxt="n", ylab="", main="Men",
     xlab="Height (in)", col.main=blue)
hist(fem, breaks=br, yaxt="n", ylab="", main="Women",
     xlab="Height (in)", col.main=pink)
hist(mal, breaks=br, yaxt="n", ylab="", main="Men",
     xlab="Height (in)", col.main=blue)
@


\newpage


\headsize \color{yellow}
\hfill
\begin{minipage}{6.25in}
\centering
Use labels not legends
\end{minipage}

\vfill

<<direct_label>>=
@






\newpage


\headsize \color{yellow}
\hfill
\begin{minipage}{6.25in}
\centering
Don't sort alphabetically
\end{minipage}

\vfill

<<alphabet>>=
load("Data/health.RData")

par(mfrow=c(1,2), bg=bgcolor, las=1, fg="white",
    col.lab="white", col.axis="white",
    mar=c(5.1, 10.1, 1.1, 1.1))

plot(0, 0, type="n", xlab="Health care spending (% GDP)",
     ylab="", yaxt="n", xlim=c(0, max(health[,2])*1.05), xaxs="i",
     ylim=c(nrow(health), 0)+0.5, yaxs="i")
axis(side=2, at=1:25, health[,1])
abline(v=seq(5, 15, by=5), col="gray25")
abline(h=seq(1, 25, by=5), col=blue)
points(health[,2], 1:25, pch=16)
axis(side=2, at=seq(1, 25, by=5), rep("", 5), col.ticks=blue)

o <- order(health[,2], decreasing=TRUE)
plot(0, 0, type="n", xlab="Health care spending (% GDP)",
     ylab="", yaxt="n", xlim=c(0, max(health[,2])*1.05), xaxs="i",
     ylim=c(nrow(health), 0)+0.5, yaxs="i")
axis(side=2, at=1:25, health[o,1])
abline(v=seq(5, 15, by=5), col="gray25")
abline(h=seq(1, 25, by=5), col=blue)
points(health[o,2], 1:25, pch=16)
axis(side=2, at=seq(1, 25, by=5), rep("", 5), col.ticks=blue)
@






\newpage


\headsize \color{yellow}
\hfill
\begin{minipage}{6.25in}
\centering
Must you include 0?
\end{minipage}

\vfill

<<include_0>>=
par(mfrow=c(1,2), bg=bgcolor, las=1, fg="white",
    col.lab="white", col.axis="white")
rate <- c(96.5, 98.1, 99.2)
b <- barplot(rate, col=c(blue, green, pink), ylab="Detection rate (%)",
             ylim=c(0, 120), col.lab="white", yaxs="i",
             border=c(blue, green, pink), xlab="Method",
             names.arg=rep("", 3), cex.lab=1.5, cex.axis=1.5)
u <- par("usr")
rect(u[1], u[3], u[2], u[4], border="white")
axis(side=1, at=b, LETTERS[1:3], col.axis="white", col="white",
     cex.axis=1.5, tick=FALSE)
text(b, rate+5, paste0(rate, "%"))

plot(0, 0, type="n", ylim=c(95, 100), yaxs="i",
     xlim=c(0.5, 3.5), xaxt="n", xlab="Method",
     cex.lab=1.5, cex.axis=1.5, ylab="Detection rate (%)")
abline(h=96:99, col="gray25")
x <- 1:3
xd <- 0.2
se <- sqrt(rate*(100-rate)/1000)
segments(x, rate-se, x, rate+se, lwd=2, col=c(blue, green, pink))
segments(x-xd/2, rate-se, x+xd/2, rate-se, lwd=2, col=c(blue, green, pink))
segments(x-xd/2, rate+se, x+xd/2, rate+se, lwd=2, col=c(blue, green, pink))
segments(x-xd, rate, x+xd, rate, lwd=3, col=c(blue, green, pink))
axis(side=1, at=1:3, LETTERS[1:3], cex.axis=1.5)
@






\newpage

\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
A bad table
\end{minipage}

\vspace{30mm}

\centerline{\includegraphics[width=8in]{Figs/tableB.png}}


\newpage

\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
Fewer digits
\end{minipage}

\vspace{30mm}

\centerline{\includegraphics[width=8in]{Figs/tableA.png}}


\newpage

\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
Yuck!
\end{minipage}

\vspace{10mm}

\centerline{\includegraphics[height=6in]{Figs/lancet_table.pdf}}

\vfill \hfill \smallestsize \color{blue}
Feigen et al., Lancet 383:245-255, 2014, Table 1

\vspace{5mm}

\newpage

\addtocounter{page}{-1}

\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
Yuck!
\end{minipage}

\vspace{10mm}

\centerline{\includegraphics[height=6in]{Figs/lancet_table_crop.png}}

\vfill \hfill \smallestsize \color{blue}
Feigen et al., Lancet 383:245-255, 2014, Table 1

\vspace{5mm}

\newpage

\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
What was wrong with that?
\end{minipage}

\vspace{30mm}

\smallersize \color{white}

\hspace{0.5in} \begin{minipage}[t]{9in}
\begin{itemize}

\itemsep18pt

\item {\color{pink} Way} too many digits.

\item Numbers aren't aligned.

\item Numbers to be compared aren't anywhere near each other.

\item The interesting comparisons are horizontal rather than
  vertical.

\item It would be much better as a multi-panel figure.
\end{itemize} \end{minipage}

\newpage

\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
One last example
\end{minipage}

\vspace{0mm}

\begin{center}
\begin{minipage}[t]{2.5in}

  \vspace*{0mm}

\centerline{\includegraphics[height=6.2in]{Crashes/Figs/chalabi-dearmona-distracted.png}}

\end{minipage}
\hspace{5mm}
\begin{minipage}[t]{2.5in}

  \vspace*{0mm}

\centerline{\includegraphics[height=6.2in]{Crashes/Figs/chalabi-dearmona-speeding.png}}

\end{minipage}
\hspace{5mm}
\begin{minipage}[t]{2.5in}

\vspace*{0mm}

\centerline{\includegraphics[height=6.2in]{Crashes/Figs/chalabi-dearmona-drinking.png}}


\end{minipage}
\end{center}


\hfill \smallestsize \color{blue}
\href{https://fivethirtyeight.com/datalab/which-state-has-the-worst-drivers/}{\tt fivethirtyeight.com/datalab/which-state-has-the-worst-drivers}

\newpage

\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
An alternative
\end{minipage}

\vspace{10mm}

\centerline{\href{https://www.biostat.wisc.edu/~kbroman/D3/car_crashes/}{\includegraphics{Crashes/crashes.pdf}}}


\newpage

\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
Scatterplots
\end{minipage}

\vspace{10mm}

\centerline{\href{https://www.biostat.wisc.edu/~kbroman/D3/car_crashes/}{\includegraphics{Crashes/crashes_scatter.pdf}}}




\newpage



\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
Summary I
\end{minipage}

\vspace{30mm}

\smallersize \color{white}
\hspace{0.5in} \begin{minipage}{9.5in}

\begin{itemize}
\itemsep18pt

\item Show the data

\item Avoid chart junk

\item Consider taking logs and/or differences

\item Put the things to be compared next to each other

\item Use color to set things apart, but consider color blind folks

\item Use position rather than angle or area to represent quantities

\end{itemize}

\end{minipage}



\newpage

\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
Summary II
\end{minipage}

\vspace{30mm}

\smallersize \color{white}
\hspace{0.5in} \begin{minipage}{9.5in}

\begin{itemize}
\itemsep18pt


\item Align things vertically to ease comparisons

\item Use common axis limits to ease comparisons

\item Use labels rather than legends

\item Sort on meaningful variables (not alphabetically)

\item Must 0 be included in the axis limits?

\item Use scatterplots to explore relationships

\end{itemize}

\end{minipage}


\newpage





\headsize \color{yellow}
\hfill
\begin{minipage}{5.75in}
\centering
Inspirations
\end{minipage}

\vspace{30mm}

\smallersize \color{white}
\hspace{0.5in} \begin{minipage}{9.5in}

\begin{itemize}
\item Hadley Wickham
{\smallestsize \color{blue}
(slides at \href{http://courses.had.co.nz}{\tt http://courses.had.co.nz})}

\item Naomi Robbins
{\smallestsize \color{blue}
(\emph{Creating more effective graphs})}

\item Howard Wainer

\item Andrew Gelman

\item Dan Carr

\item Edward Tufte

\end{itemize}

\end{minipage}




\newpage


\headsize \color{yellow}
\hfill \begin{minipage}{5.75in}
\centering
Further reading
\end{minipage}

\vspace{30mm}
\smallestsize \color{white}

\hspace{0.5in} \begin{minipage}[t]{9in}
\begin{itemize}

\itemsep12pt

\item ER Tufte (1983) The visual display of quantitative information.
Graphics Press.
\item ER Tufte (1990) Envisioning information. Graphics Press.
\item ER Tufte (1997) Visual explanations. Graphics Press.

\vspace*{8mm}

\item A Gelman, C Pasarica, R Dodhia (2002) Let's practice what we preach:
Turning tables into graphs. The American Statistician 56:121-130

\vspace*{8mm}

\item NB Robbins (2004) Creating more effective graphs. Wiley

\vspace*{8mm}

\item Nature Methods columns: \href{https://bit.ly/points_of_view}{\tt bit.ly/points\_of\_view}

\vspace*{8mm}

\item These slides: \href{https://bit.ly/graphs2018}{\tt bit.ly/graphs2018}

\end{itemize}
\end{minipage}



\end{document}
